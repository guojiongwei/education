(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f818754"],{"10c9":function(t,n,e){"use strict";var i=e("2f32"),s=e.n(i);s.a},"2f32":function(t,n,e){},4194:function(t,n,e){"use strict";var i=e("1c8b"),s=e("5dfd").find,r=e("258f"),o=e("ff9c"),a="find",c=!0,f=o(a);a in[]&&Array(1)[a]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!f},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r(a)},"9ed2":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page-container"},[e("div",{staticClass:"navbar"},[e("van-nav-bar",{attrs:{title:"添加CRM客户",fixed:""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"left",fn:function(){return[e("div",{staticClass:"nav-left"},[e("van-icon",{staticClass:"icon",attrs:{name:"arrow-left"}}),e("span",[t._v("消息")])],1)]},proxy:!0}])})],1),e("div",{staticClass:"index-page-content"},[e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{background:"#F5F5F5","input-align":"center",placeholder:"输入客户名称或手机号"},on:{search:t.onSearch},model:{value:t.keyWord,callback:function(n){t.keyWord=n},expression:"keyWord"}})],1),e("div",{staticClass:"content"},[e("van-pull-refresh",{attrs:{"pulling-text":"刷新中..."},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(n){t.refreshing=n},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,error:t.error,"finished-text":"没有更多了"},on:{"update:error":function(n){t.error=n},load:t.onLoad},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},t._l(t.crmUsers,(function(n){return e("div",{key:n.id,staticClass:"list__item",on:{click:function(e){return t.jumpToCrmInfo(n)}}},[e("div",{staticClass:"avatar"},[t._v(t._s(n.customerName.substring(0,1)))]),e("div",{staticClass:"list__content van-hairline--bottom"},[e("div",{staticClass:"content-container"},[e("div",{staticClass:"content-top van-ellipsis"},[t._v(t._s(n.customerName)+" "+t._s("（主联系人："+(n.phoneList&&n.phoneList.length>0?n.mainContact:"无主联系人数据")+"）"))]),e("div",{staticClass:"content-bottom van-ellipsis"},[t._v(t._s(n.no))]),e("div",{staticClass:"content-bottom van-ellipsis"},[t._v(t._s(n.province+" "+n.city+" "+n.area))])])])])})),0)],1)],1)])])},s=[],r=e("ebcb"),o={name:"AddCrmFriend",components:{},mixins:[r["a"]],data:function(){return{loading:!1,finished:!1,refreshing:!1,error:!1,keyWord:"",isShowAddFriend:!1,crmUsers:[]}},methods:{onClickLeft:function(){this.$router.go(-1)},jumpToCrmInfo:function(t){this.$router.push({path:"/crmInfo"}),localStorage.setItem("crmInfo",JSON.stringify(t))},onLoad:function(){this.findCrmBussiness(),this.loading=!1,this.refreshing=!1,this.finished=!0},onSearch:function(){this.findCrmBussiness()},onRefresh:function(){this.finished=!1,this.refreshing=!0,this.loading=!0,this.onLoad()}}},a=o,c=(e("10c9"),e("4023")),f=Object(c["a"])(a,i,s,!1,null,"b2fdea24",null);n["default"]=f.exports},ca00:function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));e("98e0"),e("ea69"),e("96db");var i=!0,s=!1,r=!0,o=function(t,n){var e=this,o=Array.from(arguments).splice(2);console.log(o),r&&(i&&(t.apply(this,o),i=!1),r=!1,setTimeout((function(){r=!0,s&&t.apply(e,o),i=!0,s=!i}),n))}},ebcb:function(t,n,e){"use strict";e("4194"),e("fe59"),e("9302"),e("08ba");var i=e("5c62"),s=e("365c"),r=e("ca00");n["a"]={data:function(){return{}},methods:{findCrmBussiness:function(){var t=this,n=function(){var n=[];Object(s["b"])(t.keyWord).then((function(e){if(200==e.code){var r=e.data;if(r.length>0){r.forEach((function(t){n.push(t.customerId)}));var o=n.join(",");Object(s["c"])({customerIds:o}).then((function(n){for(var e=n.data,s=0;s<r.length;s++){r[s].phoneList=[];for(var o=0;o<e.length;o++)if(r[s].customerId==e[o].customerId){var a=e[o].phoneList.find((function(t){return"CUS_CONT_STATUS_2"===t.status}));r[s].mainContact=a.no,r[s].phoneList=Object(i["a"])(e[o].phoneList);break}}t.crmUsers=r,t.$forceUpdate()})),t.crmUsers=r}}}))};Object(r["a"])(n,1500)}}}}}]);